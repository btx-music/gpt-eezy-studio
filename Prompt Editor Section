# 🛠️ Prompt Editor Section
st.markdown("---")
st.subheader("🖊️ Prompt bearbeiten")

selected_prompt_file = st.selectbox("📄 Wähle eine Datei zum Bearbeiten", prompt_files)

if selected_prompt_file:
    with open(os.path.join(prompt_dir, selected_prompt_file), "r", encoding="utf-8") as f:
        editable_content = f.read()

    new_content = st.text_area("📝 Editierbarer Prompt", value=editable_content, height=300)

    col1, col2 = st.columns(2)
    with col1:
        if st.button("💾 Überschreiben"):
            with open(os.path.join(prompt_dir, selected_prompt_file), "w", encoding="utf-8") as f:
                f.write(new_content)
            st.success("✅ Datei wurde überschrieben!")

    with col2:
        if st.button("📁 Als neue Datei speichern"):
            timestamp = datetime.now().strftime("%Y-%m-%d_%H-%M-%S")
            new_filename = f"{selected_prompt_file.replace('.txt','')}_edit_{timestamp}.txt"
            with open(os.path.join(prompt_dir, new_filename), "w", encoding="utf-8") as f:
                f.write(new_content)
            st.success(f"✅ Neue Datei gespeichert: `{new_filename}`")
